"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[21177],{905069:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var i=a(667294),o=a(616550),s=a(883119),n=a(972714),r=a(927429),l=a(169006),d=a(278229),p=a(718369),c=a(95460),u=a(41086),h=a(694517),m=a(174646),g=a(857147),y=a(882368),v=a(827491),b=a(488879),x=a(437318),_=a(93002),w=a(719311),f=a(344500),P=a(116965),A=a(757653),S=a(785893);let k=(0,A.Z)(()=>Promise.all([a.e(88755),a.e(29388),a.e(4342),a.e(47442)]).then(a.bind(a,792862)),void 0,e=>792862,"SaveAffordance"),C=(0,A.Z)(()=>a.e(21593).then(a.bind(a,400409)),void 0,e=>400409,"PostDownloadUpsellPopover"),j=(0,A.Z)(()=>Promise.resolve().then(a.bind(a,459339)),void 0,e=>459339,"SecondarySendButtonCommon"),T=(0,A.Z)(()=>Promise.all([a.e(97270),a.e(78352),a.e(24859)]).then(a.bind(a,978352)),void 0,e=>978352,"ReactionPickerContainer"),I=(0,A.Z)(()=>a.e(78602).then(a.bind(a,466107)),void 0,e=>466107,"CloseupCommentButton");function R({goBack:e,gridDescription:t,isDeletedStoryPin:a,inCommentsImprovedDropdownExp:A,inCommentsPopoverExp:R,isEligibleForAggregatedComments:E,isEligibleForPinReactions:O,isOnSecretBoard:D,onEditSubmit:Z,pin:B,viewParameter:z,viewType:M,onSaveButtonClick:H,showRepinOnInitialRender:N,isStoryPin:W,actionBarContainerRef:U,outerPaddingSize:G=x.g9,maxWidth:q,showLeadPin:F}){let Y=(0,o.TH)(),L=(0,v.Z)(),{showEnabledSaveBehavior:K}=(0,P.Yh)(!0),{imgSrc:V}=(0,d.r)(),{clientTrackingParams:J,showCloseupContentRight:X,closeupWithinMasonryEnabled:$,peekCloseupEnabled:Q}=(0,_.x4)(),{viewType:ee,viewParameter:et}=(0,p.SU)(),ea=(0,y.Z)(),ei=(0,b.q6)(ea,B?.pinner?.id,L),[eo,es]=(0,i.useState)(!!(0,g.mB)(Y.search).share),[en,er]=(0,i.useState)(!1),{shareFromPostDownloadUpsell:el,setShareFromPostDownloadUpsell:ed,saveToBoardFromPostDownloadUpsell:ep,setSaveToBoardFromPostDownloadUpsell:ec}=(0,n.t)();(0,i.useEffect)(()=>{el&&(es(!0),ed(!1))},[el,ed]);let eu=(0,i.useCallback)(e=>er(e),[]),eh=(0,i.useCallback)(()=>es(!1),[]),em=(0,i.useCallback)(()=>es(e=>!e),[]),eg=B.board?.owner?.id||B.pinner?.id,{aggregated_pin_data:ey,comments_disabled:ev,reaction_counts:eb}=B,{isRTL:ex}=(0,m.B)(),e_=$?q:q||x.Gg,ew=(0,l.Z)({pinKey:{type:"deprecated",data:B},orbacActingAs:L,viewer:ea}),ef=!!Object.keys(eb||{}).length,eP=ey?.did_it_data?.images_count??0,eA=(ey?.comment_count??0)+eP,eS=Y.state?.fromEggsBoard,ek=D||a?null:(0,S.jsx)(c.Z,{name:"CloseupActionBar_SecondarySendButton",children:(0,S.jsx)(j,{closeupWithinMasonryEnabled:$,controllerOptions:{flyoutDisplayOptions:$?{shownWithinProfileHeader:!0,idealDirection:"down",forceDirection:!0}:{wrapperPosition:"fixed"},isFlyoutOpen:eo,loggingOptions:{component:194,element:72,viewParameter:z||et,viewType:M||ee},onFlyoutDismiss:eh,onToggleFlyout:em,sendObject:{type:"pin",description:t,id:B.id,imageUrl:V,ownerId:eg,url:`/pin/${B.id}/`,clientTrackingParams:J}},showSendAnimation:!0})}),eC=(0,S.jsx)(s.xu,{alignItems:"center",color:$?"transparent":"default","data-test-id":"closeup-action-items",display:"flex",justifyContent:"between",maxWidth:e_,rounding:2,children:(0,S.jsxs)(s.kC,{alignItems:"stretch",gap:2*!!$,justifyContent:"start",children:[!ei&&!!O&&(0,S.jsx)(c.Z,{name:"CloseupActionBar_ReactionPickerContainer",children:(0,S.jsxs)(s.xu,{alignItems:"center",display:"flex",marginEnd:2*!!ef,children:[(0,S.jsx)(T,{clientTrackingParams:J,handleReactionTrayHover:eu,idealDirection:$?"down":void 0,pinId:B.id,reactionButtonSize:48,reactionByMe:B.reaction_by_me,reactionIconSize:20,showTooltip:!0,viewParameter:z,viewType:M}),(0,S.jsx)(h.Z,{pinId:B.id,reactionCounts:eb,showPrettyNumber:!0})]})}),$&&!(A&&ev)&&(0,S.jsxs)(s.kC,{alignItems:"center",direction:"row",children:[(0,S.jsx)(I,{inCommentsImprovedDropdownExp:!!A,inCommentsPopoverExp:!!R,isEligibleForAggregatedComments:!!E,pinKey:{type:"deprecated",data:B},viewParameter:z,viewType:M}),!ev&&!!eA&&(!!R||!!A)&&(0,S.jsx)(s.xv,{weight:"bold",children:(0,S.jsx)(u.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:eA})})]}),ek,(0,S.jsx)(s.xu,{children:(0,S.jsx)(s.xu,{"data-test-id":"closeup-more-options",children:(0,S.jsx)(r.Z,{carouselSlotCurrentIndex:B&&B.carousel_data&&B.carousel_data.index,clientTrackingParams:J,closeupWithinMasonryEnabled:$,goBack:e,isReactionTrayOpen:en,onEditSubmit:Z,pinKey:{type:"deprecated",data:B},showEditPin:!a&&ew,viewParameter:z,viewType:M})})})]})}),ej=$?void 0:G,eT=(0,S.jsxs)(s.xu,{ref:U,color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:G/2,paddingRight:ex?void 0:ej,paddingLeft:ex?ej:void 0,paddingBottom:$?G/2:void 0,borderRadius:W?"0px 32px 32px 32px":X?"0px 32px 32px 0":void 0}},"data-test-id":"closeup-body-sticky-content",marginTop:$?0:W?-5:0,width:$?"100%":void 0,children:[(0,S.jsx)(s.xu,{"data-test-id":"closeupActionBar",children:(0,S.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"between",children:[eC,(0,S.jsx)(s.kC,{alignItems:"center",gap:2,children:!a&&!ei&&(0,S.jsx)(s.xu,{marginStart:3*!$,children:(0,S.jsx)(k,{boardCount:ea.isAuth?ea.boardCount:0,clientTrackingParams:J,fromEggsBoard:eS||!1,onClickCallback:H,pin:B,saveToBoardFromPostDownloadUpsell:ep,setSaveToBoardFromPostDownloadUpsell:ec,showEnabledSaveBehavior:K,showRepinOnInitialRender:N,variant:"closeup",viewParameter:z,viewType:M})})})]})}),(0,S.jsx)(C,{})]});if(F||$)return eT;let eI=W&&!Q?f.cI+4:f.hu;return Q&&(eI=0),(0,S.jsx)(s.Le,{top:eI,zIndex:w.mS,children:eT})}function E(e){return(0,S.jsx)(n.z,{pin:e.pin,children:(0,S.jsx)(R,{...e})})}},972714:(e,t,a)=>{a.d(t,{t:()=>p,z:()=>d});var i=a(667294),o=a(547504),s=a(943369),n=a(831822),r=a(785893);let l=(0,i.createContext)(null);function d({pin:e,children:t}){let[a,d]=(0,i.useState)(!1),[p,c]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),m=!!e.savedInfo,g=(0,i.useCallback)(()=>{c(!0),d(!1)},[]),y=(0,i.useCallback)(()=>{h(!0),d(!1)},[]),v=(0,i.useCallback)(()=>{if(d(!1),(0,n.Z)(o.mD)&&(0,n.Z)(o.cw)){let e=(0,s.M0)(),t=e.getItem(o.cw)||0;e.setItem(o.cw,t+1),e.setItem(o.mD,Date.now())}},[]),b=(0,i.useMemo)(()=>({isPinSaved:m,showPostDownloadUpsell:a,setShowPostDownloadUpsell:d,saveToBoardFromPostDownloadUpsell:p,setSaveToBoardFromPostDownloadUpsell:c,shareFromPostDownloadUpsell:u,setShareFromPostDownloadUpsell:h,handlePostDownloadUpsellSave:g,handlePostDownloadUpsellShare:y,handlePostDownloadUpsellDismiss:v}),[m,a,d,p,c,u,h,g,y,v]);return(0,r.jsx)(l.Provider,{value:b,children:t})}function p(){let e=(0,i.useContext)(l);if(!e)throw Error("useCloseupPostDownloadUpsellContext must be used within a CloseupPostDownloadUpsellProvider");return e}},694517:(e,t,a)=>{a.d(t,{Z:()=>y});var i=a(667294),o=a(883119),s=a(781785),n=a(219308),r=a(41086),l=a(233846),d=a(76239),p=a(81945),c=a(181710),u=a(785893);function h(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let m=(0,i.lazy)(()=>a.e(53419).then(a.bind(a,953419)));class g extends i.PureComponent{constructor(...e){super(...e),h(this,"state",{displayAggregationModal:!1}),h(this,"showAggregationModal",()=>{let{disableModal:e,logContextEvent:t}=this.props;e||(this.setState({displayAggregationModal:!0}),t({event_type:101,view_type:3,view_parameter:139,component:13458,element:11435,aux_data:{objectId:this.props.pinId}}))}),h(this,"hideAggregationModal",()=>{this.setState({displayAggregationModal:!1})})}render(){let{displayAggregationModal:e}=this.state,{isBold:t,isStoryPin:a,paddingY:i,pinId:n,reactionCounts:l,showPrettyNumber:h,size:g}=this.props,y=l?(0,p.At)(l):null,v=l?(0,p.Ud)(l):0,b=!!y&&y.length>0&&y.filter(e=>!!d.GY[e]).map((e,t)=>{let a=e&&d.GY[e]?d.GY[e]:"",{label:i,gridAsset:s}=(0,d.fW)(a,this.props.i18n);return(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{marginRight:2}},children:(0,u.jsx)(o.xu,{height:19,width:19,children:s&&(0,u.jsx)(o.Ee,{alt:i??"",fit:"cover",naturalHeight:1,naturalWidth:1,src:s})})},t)});return(0,u.jsxs)(o.xu,{children:[(0,u.jsx)(o.iP,{accessibilityLabel:`${v} reactions`,dataTestId:"reactions-count-button",onTap:this.showAggregationModal,children:!!b&&(0,u.jsx)(o.xu,{"data-test-id":"aggregated-reactions-container",display:"inlineBlock",children:h?(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{cursor:"pointer"}},children:(0,u.jsx)(o.xv,{size:g??s.n,weight:"bold",children:(0,u.jsx)(r.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:v})})}):(0,u.jsxs)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{cursor:"pointer"}},"data-test-id":"aggregated-reactions-container",direction:"row",display:"flex",height:a?"auto":19,paddingY:i??6*!a,children:[(0,u.jsx)(o.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",children:b}),(0,u.jsx)(o.xu,{paddingX:1,children:(0,u.jsx)(o.xv,{color:t?"default":"subtle",size:g??s.n,weight:t?"bold":"normal",children:(0,u.jsx)(r.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:v})})})]})})}),e&&v&&(0,u.jsx)(c.Z,{children:(0,u.jsx)(m,{aggregatedReactions:b,onDismiss:this.hideAggregationModal,pinId:n,totalReactionCount:v})})]})}}h(g,"defaultProps",{isBold:!0});let y=function(e){let t=(0,l.ZP)(),a=(0,n.Z)();return(0,u.jsx)(g,{...e,i18n:t,logContextEvent:a})}},76239:(e,t,a)=>{a.d(t,{GY:()=>w,Jg:()=>_,fW:()=>f});var i=a(141594),o=a(42966),s=a(721366),n=a(252739),r=a(725170),l=a(921028),d=a(590755),p=a(861374),c=a(805525),u=a(736929),h=a(616097),m=a(486722),g=a(692984),y=a(808532),v=a(37260),b=a(308220),x=a(446649);let _=["goodIdea","love","thanks","wow","haha"],w={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},f=(e,t,a="darkGray")=>{let _={default:{staticAsset:"white"===a?h:u},goodIdea:{staticAsset:s,animatedAsset:i,gridAsset:o,label:t._('Good idea', 'Reaction label to tell a creator that their pin is a good idea', 'Reaction label to tell a creator that their pin is a good idea'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:7},haha:{staticAsset:l,animatedAsset:n,gridAsset:r,label:t._('Haha', 'Reaction label to tell a creator that the pinner laughed because of their pin', 'Reaction label to tell a creator that the pinner laughed because of their pin'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:5},love:{staticAsset:c,animatedAsset:d,gridAsset:p,label:t._('Love', 'Reaction label to tell a creator that the pinner loved their pin', 'Reaction label to tell a creator that the pinner loved their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:1},thanks:{staticAsset:y,animatedAsset:m,gridAsset:g,label:t._('Thanks', 'Reaction label to tell a creator thank you', 'Reaction label to tell a creator thank you'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:13},wow:{staticAsset:x,animatedAsset:v,gridAsset:b,label:t._('Wow', 'Reaction label to tell a creator that the pinner was wowed by their pin', 'Reaction label to tell a creator that the pinner was wowed by their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:11}};return e&&_[e]?_[e]:_.default}},116965:(e,t,a)=>{a.d(t,{ZP:()=>l,tY:()=>c,Xt:()=>d,$7:()=>u,Yh:()=>p});var i=a(545007),o=a(967312),s=a(113474),n=a(882368);let r={SAVE_TO_PROFILE:0,SHOW_BOARD_PICKER:1};function l(e){let t=(0,n.Z)(),a=t.isAuth&&t.id===e,{checkExperiment:i}=(0,o.F)(),r=(0,s.Z)(!t.isAuth||a?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{showEnabledSaveBehavior:a&&t.has_quicksave_board||!!(t.isAuth&&(r??{}).data?.has_quicksave_board)||(a||t.isAuth)&&!t.has_quicksave_board&&!(r??{}).data?.has_quicksave_board&&i("profile_saves_for_all").anyEnabled}}function d(e){let t=(0,n.Z)(),a=t.isAuth&&t.id===e,i=(0,s.Z)(!t.isAuth||a?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{boardlessPinsEnabled:a&&t.has_quicksave_board||!!(t.isAuth&&(i??{}).data?.has_quicksave_board)}}function p(e){let t=(0,i.I0)(),a=(0,n.Z)(),o=a.isAuth&&!!a.boardCount&&a.boardCount<5&&e,r=(0,s.Z)(o&&e?{name:"UserResource",options:{field_set_key:"save_behavior",user_id:a.isAuth&&a.id}}:null);return a.isAuth&&void 0===a.save_behavior&&r&&r.data?.id&&t({type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:r.data.save_behavior}}),{showEnabledSaveBehavior:o}}function c(e){let t,a=(0,n.Z)();return a.isAuth&&e&&(a.save_behavior===r.SAVE_TO_PROFILE?t={type:"classic"}:a.save_behavior===r.SHOW_BOARD_PICKER&&(t={type:"inline"})),{saveBehaviorType:t}}function u(){let e=(0,n.Z)();return e.isAuth&&(e?.secretBoardCount??0)>0}},906417:(e,t,a)=>{a.d(t,{X:()=>p,f:()=>d});var i=a(667294),o=a(218291),s=a(158759);function n(e=null,t){switch(t.type){case"REPORT_CONTENT_SHOW":return{id:t.payload.id,auxData:t.payload.auxData,isProduct:t.payload.isProduct,isPromoted:t.payload.isPromoted,parentId:t.payload.parentId,videoDuration:t.payload.videoDuration,viewParameter:t.payload.viewParameter,viewType:t.payload.viewType,type:t.payload.type,isThirdPartyAd:t.payload.isThirdPartyAd,nodeId:t.payload.nodeId};case"REPORT_CONTENT_DISMISS":return null;default:return e}}var r=a(785893);let{Provider:l,useHook:d}=(0,o.Z)("ReportData");function p({children:e}){let[t,a]=(0,i.useReducer)(n,null),o=(0,i.useCallback)(()=>a({type:"REPORT_CONTENT_DISMISS"}),[]),d=(0,i.useCallback)((e,t,i)=>a({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,parentId:t,videoDuration:null,viewParameter:null,viewType:null,type:i,nodeId:null}}),[]),p=(0,i.useCallback)((e,t,i)=>a({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:i,type:"conversation",nodeId:null}}),[]),c=(0,i.useCallback)(({id:e,viewParameter:t,viewType:i,nodeId:o})=>a({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:i,type:"pin",nodeId:o}}),[]),u=(0,i.useCallback)(({pinId:e,isDownstreamPromotion:t,hasPromoter:i,firstVideoDuration:o,isProduct:n,viewParameter:r,viewType:l,isThirdPartyAd:d,nodeId:p,auxData:c})=>{a({type:"REPORT_CONTENT_SHOW",payload:{id:e,auxData:c,isProduct:n,isPromoted:(0,s.jL)(t,i),videoDuration:o,viewParameter:r,viewType:l,type:"pin",isThirdPartyAd:d,nodeId:p}})},[]),h=(0,i.useMemo)(()=>({reportData:t,dismiss:o,reportComment:d,reportConversation:p,reportImage:c,reportPin:u}),[t,o,d,p,c,u]);return(0,r.jsx)(l,{value:h,children:e})}},141594:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaAnimated-5de05cb7.svg"},42966:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaGrid-e3e37a7f.svg"},721366:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaStatic-855554b0.svg"},252739:e=>{e.exports="https://s.pinimg.com/webapp/hahaAnimated-df9cb2fa.svg"},725170:e=>{e.exports="https://s.pinimg.com/webapp/hahaGrid-7945c718.svg"},921028:e=>{e.exports="https://s.pinimg.com/webapp/hahaStatic-28ee6e1e.svg"},590755:e=>{e.exports="https://s.pinimg.com/webapp/loveAnimated-ccd5b808.svg"},861374:e=>{e.exports="https://s.pinimg.com/webapp/loveGrid-1ec7b8e4.svg"},805525:e=>{e.exports="https://s.pinimg.com/webapp/loveStatic-31fc2a99.svg"},736929:e=>{e.exports="https://s.pinimg.com/webapp/reactionHeartOutline-24ab75a6.svg"},616097:e=>{e.exports="https://s.pinimg.com/webapp/reactionHeartOutlineWhite-61cdbdb7.svg"},486722:e=>{e.exports="https://s.pinimg.com/webapp/thanksAnimated-6831daf3.svg"},692984:e=>{e.exports="https://s.pinimg.com/webapp/thanksGrid-b3cf8b93.svg"},808532:e=>{e.exports="https://s.pinimg.com/webapp/thanksStatic-51f19932.svg"},37260:e=>{e.exports="https://s.pinimg.com/webapp/wowAnimated-b776449f.svg"},308220:e=>{e.exports="https://s.pinimg.com/webapp/wowGrid-9e62e75a.svg"},446649:e=>{e.exports="https://s.pinimg.com/webapp/wowStatic-d966adbd.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/CloseupActionBarCommon-833f987dab3b9417.mjs.map